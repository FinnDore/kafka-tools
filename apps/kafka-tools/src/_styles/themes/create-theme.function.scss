@use '@angular/material' as mat;
@use 'sass:map';
@use 'sass:color';

@import '~@angular/material/theming';
@import '~/src/_styles/themes/theme-functions.scss';
@import '~/src/_styles/themes/font-config.scss';

@function create-theme($theme-colors: null) {
    /** -----------------------------------  Theme ----------------------------------------- */

    $theme-color-lightens-darkens: ();

    $theme-primary: map.get($theme-colors, 'primary');
    $theme-accent: map.get($theme-colors, 'accent');
    $theme-warn: map.get($theme-colors, 'warn');

    $theme-success: map.get($theme-colors, 'success');
    $theme-attention: map.get($theme-colors, 'attention');
    $theme-background: map.get($theme-colors, 'background');
    $theme-foreground: map.get($theme-colors, 'foreground');
    $theme-shadow: map.get($theme-colors, 'shadow');

    /** -----------------------------------  A material Theme ----------------------------------------- */

    // Light Theme Text
    $text: $theme-foreground;
    $dark-primary-text: rgba($text, 0.87);
    $dark-accent-text: rgba($dark-primary-text, 0.54);
    $dark-disabled-text: rgba($dark-primary-text, 0.38);
    $dark-dividers: rgba($dark-primary-text, 0.12);
    $dark-focused: rgba($dark-primary-text, 0.12);

    $mat-light-theme-foreground: (
        base: $theme-foreground,
        divider: $dark-dividers,
        dividers: $dark-dividers,
        disabled: $dark-disabled-text,
        disabled-button: rgba($text, 0.26),
        disabled-text: $dark-disabled-text,
        elevation: $theme-shadow,
        secondary-text: $dark-accent-text,
        hint-text: $dark-disabled-text,
        accent-text: $dark-accent-text,
        icon: $dark-accent-text,
        icons: $dark-accent-text,
        text: $dark-primary-text,
        slider-min: $dark-primary-text,
        slider-off: rgba($text, 0.26),
        slider-off-active: $dark-disabled-text,
    );

    // Background config
    // Light bg
    $background: $theme-background;
    $light-bg-darker-5: darken($background, 5%);
    $light-bg-darker-10: darken($background, 10%);
    $light-bg-darker-20: darken($background, 20%);
    $light-bg-darker-30: darken($background, 30%);
    $light-bg-lighter-5: lighten($background, 5%);
    $dark-bg-tooltip: lighten($theme-background, 20%);
    $dark-bg-alpha-4: rgba($theme-background, 0.04);
    $dark-bg-alpha-12: rgba($theme-background, 0.12);

    $mat-light-theme-background: (
        background: $background,
        status-bar: $light-bg-darker-20,
        app-bar: $light-bg-darker-5,
        hover: $dark-bg-alpha-4,
        card: $light-bg-lighter-5,
        dialog: $light-bg-lighter-5,
        tooltip: $dark-bg-tooltip,
        disabled-button: $dark-bg-alpha-12,
        raised-button: $light-bg-lighter-5,
        focused-button: $dark-focused,
        selected-button: $light-bg-darker-20,
        selected-disabled-button: $light-bg-darker-30,
        disabled-button-toggle: $light-bg-darker-10,
        unselected-chip: $light-bg-darker-10,
        disabled-list-option: $light-bg-darker-10,
    );
    // Theme Config

    $mat-primary: (
        main: #4200ff,
        lighter: #c6b3ff,
        darker: #2b00ff,
        200: #4200ff,
        // For slide toggle,
        contrast:
            (
                main: $light-primary-text,
                lighter: $dark-primary-text,
                darker: $light-primary-text,
            ),
    );
    $theme-primary: mat.define-palette($mat-primary, main, lighter, darker);

    $mat-accent: (
        main: #000000,
        lighter: #b3b3b3,
        darker: #000000,
        200: #000000,
        // For slide toggle,
        contrast:
            (
                main: $light-primary-text,
                lighter: $dark-primary-text,
                darker: $light-primary-text,
            ),
    );

    $theme-accent: mat.define-palette($mat-accent, main, lighter, darker);

    $mat-warn: (
        main: #ff0032,
        lighter: #ffb3c2,
        darker: #a8071a,
        200: #ff0032,
        // For slide toggle,
        contrast:
            (
                main: $light-primary-text,
                lighter: $dark-primary-text,
                darker: $light-primary-text,
            ),
    );

    $theme-warn: mat.define-palette($mat-warn, main, lighter, darker);

    $theme: (
        primary: $theme-primary,
        accent: $theme-accent,
        warn: $theme-warn,
        is-dark: false,
        foreground: $mat-light-theme-foreground,
        background: $mat-light-theme-background,
    );
    @return $theme;
}
